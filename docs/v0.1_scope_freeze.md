# v0.1 Scope Freeze & Acceptance Criteria

**Status**: FROZEN as of 2026-02-08  
**Release Target**: v0.1 "Operational MVP"  
**Signed Off By**: Development Team

## Executive Summary

v0.1 delivers a minimal but complete end-to-end system for S&S LTD to:
- Accept quote requests from public website
- Manage leads and convert them to projects
- Enable office staff to track projects, messages, and timesheets
- Allow field workers (via Android app) to capture photos, log time, and communicate
- Provide clients with visibility into their leads and projects

All core security, performance, and reliability gates have been met.

## What MUST Ship in v0.1

### WEB Portal (Office-First)

#### Public Website
- [x] Home, About, Services, Gallery, Contact pages
- [x] Request a Quote flow (Simple & Advanced modes)
- [x] Client registration and login
- [x] Privacy Policy and Terms pages

#### Portal - Core Modules
- [x] **Dashboard**: Overview with quick stats and actions
- [x] **Leads & Quotes**:
  - Lead list with pagination and filters
  - Lead detail view with status, metadata, and attachments
  - Assign Project Manager (admin only)
  - Status transitions (new → quote_review → meeting_scheduled → quoted → won/lost)
  - Convert lead to project
  - Lead-level message thread
- [x] **Projects**:
  - Project list with pagination and filters (status, assigned PM)
  - Project detail Overview tab (status, address, client info, team)
  - Project status management
  - Project-level message thread
- [x] **Messages**:
  - Inbox view (threads list)
  - Thread view (messages + compose)
  - Unread tracking and marking
  - Auto-create thread per lead/project
- [x] **Files & Uploads**:
  - Secure download route with ACL checks
  - Client visibility toggle (`client_visible` flag)
  - File type and size validation
- [x] **Admin**:
  - Users list, create, edit
  - Set/reset passwords
  - Role changes and status toggle
  - Audit log viewer with filters (entity, action)

#### Client Portal
- [x] View own leads and projects
- [x] Access message threads
- [x] Download client-visible files
- [x] Basic approvals panel (placeholder for quote/schedule/change approvals)

### API (Mobile-First)

#### Authentication
- [x] Bearer token authentication
- [x] Login endpoint (`POST /api/auth/login`)
- [x] Register endpoint (`POST /api/auth/register`)
- [x] Token refresh strategy (`POST /api/auth/refresh`)
- [x] Current user endpoint (`GET /api/auth/me`)

#### Core Endpoints
- [x] Projects: `GET /api/projects`, `GET /api/projects/:id`
- [x] Threads: `GET /api/threads`, `GET /api/threads/:id/messages`
- [x] Messages: `POST /api/threads/:id/messages`
- [x] Uploads: `POST /api/uploads` (multipart)
- [x] Timesheets: `POST /api/timesheets/start`, `POST /api/timesheets/stop`, `GET /api/timesheets`

#### Security & Performance
- [x] Rate limiting (login, uploads, messages)
- [x] Input validation and sanitization
- [x] Error format with request IDs
- [x] CSRF protection for all state-changing web routes
- [x] SQL injection prevention (prepared statements only)

### Android App (Field-First)

#### Core Features
- [x] Login with token persistence (EncryptedSharedPreferences)
- [x] Offline mode detection and banner
- [x] **Today Screen**: Start/Stop timesheets with running timer UI
- [x] **Projects**: List and detail views (read-only)
- [x] **Capture**: Camera + file picker, attach to project, offline queue
- [x] **Messages**: Thread list, thread view, send text + attachments
- [x] **Profile**: User info and sign out

#### Offline & Sync
- [x] Room DB for offline cache (projects, threads, messages)
- [x] Upload queue with WorkManager
- [x] Background sync with retry logic
- [x] Queued item status UI (pending/uploading/failed)

#### Security
- [x] Runtime permissions (camera, notifications)
- [x] EXIF GPS stripping by default
- [x] Encrypted token storage

### Database & Migrations

- [x] MySQL schema (XAMPP default)
- [x] SQLite support for dev/testing
- [x] All migrations applied and tested
- [x] Seed data for demo/testing
- [x] Indexes on filtering/sorting columns
- [x] `mysql.sql` export up-to-date

### Security (Release Gate)

- [x] Passwords: `password_hash()` / `password_verify()`
- [x] Sessions: HttpOnly cookies, regenerated on login
- [x] CSRF: Required for all state-changing web requests
- [x] SQL: Prepared statements only (PDO)
- [x] Uploads: Size/type validation, safe storage paths
- [x] RBAC + per-project ACL enforcement
- [x] Login rate limiting and lockout
- [x] Content Security Policy (CSP) enabled
- [x] Production config enforcement (APP_KEY, APP_DEBUG=0, HTTPS cookies)

### Performance & Reliability (Release Gate)

- [x] Pagination on all list views
- [x] DB indexes on filter/sort columns
- [x] File streaming download (no memory bloat)
- [x] Static asset caching and compression
- [x] Log rotation for `storage/logs/`
- [x] Health check endpoints (`/health`, `/health/db`)
- [x] Automated smoke tests (`bin/smoke_http.php`)

### QA & Testing

- [x] PHP syntax linter (`bin/php_lint.php`)
- [x] Large file upload/download tests (`bin/qa_large_files.php`)
- [x] Dev tools endpoint tests (`bin/qa_dev_tools.php`)
- [x] RC1 local staging validation (`bin/rc1_local_staging.php`)
- [x] Manual test checklist documented (`docs/manual_test_checklist.md`)

### Documentation

- [x] Setup guide (`docs/setup.md`)
- [x] Backup/restore procedures (`docs/backups.md`)
- [x] Conflict resolution strategy (`docs/conflict_strategy.md`)
- [x] Background jobs plan (`docs/background_jobs.md`)
- [x] Manual test checklist (`docs/manual_test_checklist.md`)
- [x] Android README (`android/README.md`)

## What Goes to Backlog (v0.2+)

### Deferred to v0.2
- Quote checklist approvals (web client approval flow)
- Project checklist (API + Android)
- Email notifications
- Push notifications (Android)

### Deferred to v0.3+
- Schedule proposals + client approval
- Inventory management (materials/tools)
- Project inventory usage tracking
- Reports + Issues module
- Change requests + client approvals
- Subcontractor management UI
- Schedule calendar view
- Advanced search and filtering
- Integrations (Drive/Dropbox, SMTP)
- Automated reminders and workflows

## Acceptance Criteria

### Definition of Done

A feature is "done" when:
1. Code is implemented and follows security baselines
2. Database migrations are applied and `mysql.sql` is updated
3. Changes are logged in `changelogs.lua`
4. Automated tests pass (linter, smoke tests, qa scripts)
5. Manual testing confirms happy path works
6. Documentation is updated if user-facing

### Release Gate Checklist

Before v0.1 ships:
1. ✅ All "MUST ship" features are implemented and working
2. ✅ All security baselines are met (no regressions)
3. ✅ All performance gates are met (pagination, indexes, streaming)
4. ✅ Automated QA passes (`bin/php_lint.php`, `bin/qa_*.php`, `bin/rc1_local_staging.php`)
5. ⏳ Manual QA checklist completed (`docs/manual_test_checklist.md`)
6. ⏳ Release artifacts prepared (tag, `mysql.sql`, Android APK/AAB)
7. ⏳ Deployment plan confirmed (server, DB backup, rollback procedure)

### Known Limitations (Acceptable for v0.1)

- No email notifications (manual communication only)
- No push notifications on Android
- No real-time updates (requires manual refresh)
- Client approvals are placeholders (no workflow yet)
- Android works online-first (offline is best-effort cache)
- Dev tools remain in codebase (gated by `APP_DEBUG=1`)

## Out of Scope (Not in v0.1)

- Multi-language support
- Advanced reporting and analytics
- Third-party integrations (payment, accounting, CRM)
- Advanced scheduling (resource conflicts, crew management)
- Mobile web version (Android app only)
- iOS app
- Public API for third-party developers
- White-label or multi-tenant support

## Sign-Off

**Scope Frozen**: 2026-02-08  
**Approved By**: Development Team  
**Next Steps**: Complete manual QA (item 22), prepare release (items 23-26)

This document is the authoritative reference for v0.1 scope. Any changes require explicit approval and scope re-baseline.
